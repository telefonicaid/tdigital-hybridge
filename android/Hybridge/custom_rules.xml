<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE project>
<project xmlns:if="ant:if"
    xmlns:unless="ant:unless"
    name="customHybridge"
    basedir="."
    default="release" >

    <echo level="info" >
Start custom_rules.xml of Hybridge...
    </echo>

    <target
        name="current-version"
        description="Gets the current version." >

        <property file="version.properties" />

        <property
            name="build.number"
            value="${build.revision.number}.${build.major.number}.${build.minor.number}" />

        <echo>
Current build number:${build.number}
        </echo>
    </target>

    <target
        name="-inc-minor"
        if="incminor" >

        <propertyfile file="version.properties" >

            <entry
                key="build.minor.number"
                operation="+"
                pattern="0"
                type="int"
                value="1" />
        </propertyfile>
    </target>

    <target
        name="-inc-major"
        if="incmajor" >

        <propertyfile file="version.properties" >

            <entry
                key="build.major.number"
                operation="+"
                pattern="0"
                type="int"
                value="1" />
        </propertyfile>
    </target>

    <target
        name="genLib"
        depends="release, -inc-major, -inc-minor, current-version"
        description="Generates" >

        <jar
            basedir="bin/classes"
            destfile="bin/hybridge-${build.number}.jar" />

        <echo level="info" >
*** Generated Hybridge lib with version: ${build.number} ***
        </echo>
    </target>

</project>